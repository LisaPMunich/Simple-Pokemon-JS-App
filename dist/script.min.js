let pokemonRepository=function(){let e=[];function t(t){"object"==typeof t&&void 0!==t.name&&void 0!==t.detailsUrl?e.push(t):console.log("Pokemon does not fit conditions")}function o(e){let t=e.detailsUrl;return fetch(t).then(e=>e.json()).then(t=>(e.imageUrl=t.sprites.front_default,e.height=t.height,e.types=t.types,e)).catch(e=>console.error(e))}function n(e){o(e).then(e=>pokemonModal.showModal(e.name,e))}return{add:t,getAll:function(){return console.log(),e},addListItem:function(e){let t=$(".row"),o=$(`\n              <div class="col-sm-6 col-lg-4 pokemon-list-column">\n                  <h2 class="pokemon-list-column__title">${e.name}</h2>\n                  <button type="button" class="btn btn-light" data-toggle="modal" data-target="#modal-dialog" aria-label="close">show  details</button>\n                  <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${e.id}.png" class="modal-img" style="width:50%" alt="responsive image" aria-label="image of ${e.name}">\n              </div>`),l=o.find("button");$(l).on("click",function(){n(e)}),t.append(o)},loadList:function(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=140").then(e=>e.json()).then(e=>{e.results.forEach((e,o)=>{let n={id:o+1,name:e.name,detailsUrl:e.url};t(n),console.log(n)})}).catch(e=>console.error(e))},loadDetails:o,showDetails:n}}();$("#searchBar").on("keyup",e=>{let t=e.target.value.toLowerCase(),o=pokemonRepository.getAll().filter(e=>e.name.toLowerCase().includes(t));$(".row").empty(),o.forEach(e=>pokemonRepository.addListItem(e))});let pokemonModal=function(){let e=document.querySelector("#modal-container");function t(t,n){e.innerHTML="",console.log(n);let l=document.createElement("div");l.classList.add("modal-dialog"),e.append(l);let a=document.createElement("div");a.classList.add("modal-content"),l.append(a);let i=document.createElement("div");i.classList.add("modal-header"),a.append(i);let s=document.createElement("h3");s.classList.add("modal-title"),s.innerText=t,i.append(s);let d=document.createElement("button");d.classList.add("btn"),d.innerHTML="&times;",i.append(d);let c=document.createElement("div");c.classList.add("modal-body"),a.append(c);let r=document.createElement("p");r.innerText=`height: ${n.height/10}m`,c.append(r);let m=document.createElement("p"),p=n.types[0].type.name;n.types[1]&&(p+=", "+n.types[1].type.name),m.innerText=`types: ${p}`,c.append(m);let u=document.createElement("img");u.setAttribute("src",n.imageUrl);u.setAttribute("style","height: 300px; width: 300px"),c.append(u),e.classList.add("is-visible"),d.addEventListener("click",o)}function o(){e.classList.remove("is-visible")}return $(".btn.btn-light").on("click",()=>{t()}),window.addEventListener("keydown",t=>{"Escape"===t.key&&e.classList.contains("is-visible")&&o()}),e.addEventListener("click",t=>{t.target===e&&o()}),{hideModal:o,showModal:t}}();pokemonRepository.loadList().then(()=>pokemonRepository.getAll().forEach(e=>pokemonRepository.addListItem(e)));